
-- University Fest Management System (12 Tables)
-- Author: Generated by ChatGPT (Full Schema + Sample Data)

DROP DATABASE IF EXISTS UniversityFestDB;
CREATE DATABASE UniversityFestDB;
USE UniversityFestDB;

-- 1. FEST
CREATE TABLE Fest (
    Fest_ID VARCHAR(10) PRIMARY KEY,
    Fest_name VARCHAR(100) NOT NULL,
    Year INT NOT NULL,
    Head_teamID VARCHAR(10)
);

-- 2. TEAMS
CREATE TABLE Teams (
    Team_ID VARCHAR(10) PRIMARY KEY,
    Team_name VARCHAR(100) NOT NULL,
    Team_type ENUM('MNG', 'ORG') DEFAULT 'ORG',
    FestID VARCHAR(10),
    FOREIGN KEY (FestID) REFERENCES Fest(Fest_ID) ON DELETE CASCADE
);

-- 3. MEMBERS
CREATE TABLE Members (
    Mem_ID VARCHAR(10) PRIMARY KEY,
    Mem_name VARCHAR(100) NOT NULL,
    DOB DATE,
    super_MemID VARCHAR(10),
    TeamID VARCHAR(10),
    FOREIGN KEY (super_MemID) REFERENCES Members(Mem_ID),
    FOREIGN KEY (TeamID) REFERENCES Teams(Team_ID) ON DELETE CASCADE
);

-- 4. EVENT
CREATE TABLE Event (
    Event_ID VARCHAR(10) PRIMARY KEY,
    Event_name VARCHAR(100) NOT NULL,
    Building VARCHAR(50),
    Floor VARCHAR(10),
    Room_no VARCHAR(10),
    Price DECIMAL(8,2) CHECK (Price <= 1500),
    TeamID VARCHAR(10),
    FOREIGN KEY (TeamID) REFERENCES Teams(Team_ID) ON DELETE CASCADE
);

-- 5. EVENT_CONDUCTION
CREATE TABLE Event_conduction (
    Event_ID VARCHAR(10),
    Date_of_conduction DATE,
    PRIMARY KEY (Event_ID, Date_of_conduction),
    FOREIGN KEY (Event_ID) REFERENCES Event(Event_ID) ON DELETE CASCADE
);

-- 6. PARTICIPANTS
CREATE TABLE Participants (
    SRN VARCHAR(15) PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,
    Department VARCHAR(50),
    Semester INT,
    Gender ENUM('M','F','O')
);

-- 7. VISITORS
CREATE TABLE Visitors (
    Visitor_ID VARCHAR(10) PRIMARY KEY,
    SRN VARCHAR(15),
    Name VARCHAR(100) NOT NULL,
    Age INT,
    Gender ENUM('M','F','O'),
    FOREIGN KEY (SRN) REFERENCES Participants(SRN) ON DELETE CASCADE
);

-- 8. REGISTRATION
CREATE TABLE Registration (
    RegistrationID VARCHAR(10) PRIMARY KEY,
    Event_ID VARCHAR(10),
    SRN VARCHAR(15),
    FOREIGN KEY (Event_ID) REFERENCES Event(Event_ID) ON DELETE CASCADE,
    FOREIGN KEY (SRN) REFERENCES Participants(SRN) ON DELETE CASCADE
);

-- 9. STALL
CREATE TABLE Stall (
    Stall_ID VARCHAR(10) PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,
    Fest_ID VARCHAR(10),
    FOREIGN KEY (Fest_ID) REFERENCES Fest(Fest_ID) ON DELETE CASCADE
);

-- 10. ITEM
CREATE TABLE Item (
    Item_name VARCHAR(100) PRIMARY KEY,
    Type ENUM('Veg','Non-Veg')
);

-- 11. STALL_ITEMS
CREATE TABLE Stall_items (
    Stall_ID VARCHAR(10),
    Item_name VARCHAR(100),
    Price_per_unit DECIMAL(8,2),
    Total_quantity INT,
    PRIMARY KEY (Stall_ID, Item_name),
    FOREIGN KEY (Stall_ID) REFERENCES Stall(Stall_ID) ON DELETE CASCADE,
    FOREIGN KEY (Item_name) REFERENCES Item(Item_name) ON DELETE CASCADE
);

-- 12. PURCHASED
CREATE TABLE Purchased (
    Purchase_ID VARCHAR(10) PRIMARY KEY,
    SRN VARCHAR(15),
    Stall_ID VARCHAR(10),
    Item_name VARCHAR(100),
    Timestamp DATETIME,
    Quantity INT,
    FOREIGN KEY (SRN) REFERENCES Participants(SRN) ON DELETE CASCADE,
    FOREIGN KEY (Stall_ID) REFERENCES Stall(Stall_ID) ON DELETE CASCADE,
    FOREIGN KEY (Item_name) REFERENCES Item(Item_name) ON DELETE CASCADE
);

-- SAMPLE DATA (around 15 records per table)

INSERT INTO Fest VALUES
('F001','Utsav',2024,'T001'),
('F002','TechFest',2025,'T002'),
('F003','CulturalFiesta',2024,'T003'),
('F004','Innova',2023,'T004'),
('F005','Spark',2022,'T005'),
('F006','Impulse',2025,'T006'),
('F007','Verve',2024,'T007'),
('F008','Ignite',2023,'T008'),
('F009','Eureka',2025,'T009'),
('F010','Cosmos',2024,'T010'),
('F011','Orbit',2023,'T011'),
('F012','Aether',2025,'T012'),
('F013','Zenith',2024,'T013'),
('F014','Vista',2023,'T014'),
('F015','Blitz',2025,'T015');

INSERT INTO Teams VALUES
('T001','Core Management','MNG','F001'),
('T002','Tech Team','ORG','F002'),
('T003','Cultural Team','ORG','F003'),
('T004','Logistics','ORG','F004'),
('T005','Finance','MNG','F005'),
('T006','Design','ORG','F006'),
('T007','Marketing','MNG','F007'),
('T008','Music','ORG','F008'),
('T009','Dance','ORG','F009'),
('T010','Sports','ORG','F010'),
('T011','Drama','ORG','F011'),
('T012','Sponsorship','MNG','F012'),
('T013','Photography','ORG','F013'),
('T014','Decoration','ORG','F014'),
('T015','Gaming','ORG','F015');

-- Members (sample simplified)
INSERT INTO Members VALUES
('M001','Ravi','2002-03-10',NULL,'T001'),
('M002','Priya','2001-07-15','M001','T001'),
('M003','Ankit','2002-04-12',NULL,'T002'),
('M004','Sanya','2003-05-23','M003','T002'),
('M005','Vivek','2001-09-09',NULL,'T003'),
('M006','Tina','2002-12-05','M005','T003'),
('M007','Arjun','2000-06-06',NULL,'T004'),
('M008','Sara','2001-08-08','M007','T004'),
('M009','Kiran','2002-03-22',NULL,'T005'),
('M010','Megha','2003-01-01','M009','T005'),
('M011','Nikhil','2001-05-05',NULL,'T006'),
('M012','Pooja','2002-06-06','M011','T006'),
('M013','Aditya','2002-09-09',NULL,'T007'),
('M014','Neha','2001-10-10','M013','T007'),
('M015','Rahul','2003-02-02',NULL,'T008');

-- Event
INSERT INTO Event VALUES
('E001','Coding Marathon','B','2','201',1000,'T002'),
('E002','Hackathon','B','3','301',1200,'T002'),
('E003','Dance Show','A','1','105',800,'T003'),
('E004','Music Gala','C','G','Hall',900,'T008'),
('E005','Drama Night','A','2','202',700,'T011'),
('E006','Poster Design','D','1','101',600,'T006'),
('E007','Startup Pitch','E','1','102',1500,'T005'),
('E008','Gaming Arena','F','B','303',500,'T015'),
('E009','Food Fest','G','G','Main',300,'T014'),
('E010','Cricket League','H','G','Stadium',1000,'T010'),
('E011','Photography Contest','C','2','204',700,'T013'),
('E012','Quiz Competition','B','1','103',400,'T009'),
('E013','Coding Duel','B','3','302',1100,'T002'),
('E014','Treasure Hunt','A','G','Playground',900,'T004'),
('E015','Fashion Show','A','G','Auditorium',1300,'T003');

-- Event_conduction
INSERT INTO Event_conduction VALUES
('E001','2025-03-01'),('E001','2025-03-02'),
('E002','2025-03-05'),('E003','2025-03-10'),
('E004','2025-03-12'),('E005','2025-03-13'),
('E006','2025-03-15'),('E007','2025-03-18'),
('E008','2025-03-19'),('E009','2025-03-20'),
('E010','2025-03-21'),('E011','2025-03-22'),
('E012','2025-03-23'),('E013','2025-03-24'),
('E015','2025-03-25');

-- Participants
INSERT INTO Participants VALUES
('PES1UG23CS001','Aarav','CSE',5,'M'),
('PES1UG23CS002','Priya','CSE',5,'F'),
('PES1UG23EC001','Rahul','ECE',5,'M'),
('PES1UG23ME001','Ananya','ME',5,'F'),
('PES1UG23IS001','Rohit','ISE',4,'M'),
('PES1UG23EE001','Neha','EEE',3,'F'),
('PES1UG23BT001','Suresh','BT',3,'M'),
('PES1UG23CV001','Sneha','CIV',5,'F'),
('PES1UG23EC002','Ramesh','ECE',5,'M'),
('PES1UG23CS003','Simran','CSE',6,'F'),
('PES1UG23CS004','Harsh','CSE',5,'M'),
('PES1UG23CS005','Isha','CSE',5,'F'),
('PES1UG23CS006','Adarsh','CSE',4,'M'),
('PES1UG23CS007','Diya','CSE',4,'F'),
('PES1UG23CS008','Kabir','CSE',5,'M');

-- Visitors
INSERT INTO Visitors VALUES
('V001','PES1UG23CS001','Kiran',30,'M'),
('V002','PES1UG23CS002','Leela',28,'F'),
('V003','PES1UG23EC001','Ravi',32,'M'),
('V004','PES1UG23ME001','Tina',25,'F'),
('V005','PES1UG23IS001','Anil',27,'M'),
('V006','PES1UG23EE001','Sita',26,'F'),
('V007','PES1UG23BT001','Deepa',29,'F'),
('V008','PES1UG23CV001','Aman',24,'M'),
('V009','PES1UG23EC002','Vikram',31,'M'),
('V010','PES1UG23CS003','Pooja',28,'F'),
('V011','PES1UG23CS004','Sameer',22,'M'),
('V012','PES1UG23CS005','Maya',27,'F'),
('V013','PES1UG23CS006','Ajay',23,'M'),
('V014','PES1UG23CS007','Sonia',30,'F'),
('V015','PES1UG23CS008','Varun',21,'M');

-- Registration
INSERT INTO Registration VALUES
('R001','E001','PES1UG23CS001'),
('R002','E002','PES1UG23CS002'),
('R003','E003','PES1UG23EC001'),
('R004','E004','PES1UG23ME001'),
('R005','E005','PES1UG23IS001'),
('R006','E006','PES1UG23EE001'),
('R007','E007','PES1UG23BT001'),
('R008','E008','PES1UG23CV001'),
('R009','E009','PES1UG23EC002'),
('R010','E010','PES1UG23CS003'),
('R011','E011','PES1UG23CS004'),
('R012','E012','PES1UG23CS005'),
('R013','E013','PES1UG23CS006'),
('R014','E014','PES1UG23CS007'),
('R015','E015','PES1UG23CS008');

-- Stall
INSERT INTO Stall VALUES
('S001','Foodies Corner','F001'),
('S002','Snack Shack','F002'),
('S003','Gourmet Hub','F003'),
('S004','Cafe Delight','F004'),
('S005','Sweet Tooth','F005'),
('S006','Tandoor Treats','F006'),
('S007','Veggie Villa','F007'),
('S008','Beverage Bar','F008'),
('S009','Chaat Chat','F009'),
('S010','Pizza Point','F010'),
('S011','Noodle Nest','F011'),
('S012','Grill Zone','F012'),
('S013','Soup Stop','F013'),
('S014','Wrap World','F014'),
('S015','Dessert Den','F015');

-- Item
INSERT INTO Item VALUES
('Chicken Soup','Non-Veg'),
('Tomato Soup','Veg'),
('Veg Sandwich','Veg'),
('Chicken Roll','Non-Veg'),
('Veg Roll','Veg'),
('Noodles','Veg'),
('Fried Rice','Veg'),
('Paneer Tikka','Veg'),
('Chicken Biryani','Non-Veg'),
('Momo','Veg'),
('Burger','Veg'),
('Fries','Veg'),
('Pasta','Veg'),
('Wrap','Veg'),
('Ice Cream','Veg');

-- Stall_items
INSERT INTO Stall_items VALUES
('S001','Chicken Soup',120,100),
('S001','Tomato Soup',90,150),
('S002','Veg Sandwich',80,120),
('S003','Chicken Roll',150,90),
('S004','Veg Roll',70,130),
('S005','Noodles',100,100),
('S006','Fried Rice',110,150),
('S007','Paneer Tikka',130,80),
('S008','Chicken Biryani',200,70),
('S009','Momo',90,110),
('S010','Burger',120,120),
('S011','Fries',100,140),
('S012','Pasta',140,100),
('S013','Wrap',130,130),
('S014','Ice Cream',80,200);

-- Purchased
INSERT INTO Purchased VALUES
('PU001','PES1UG23CS001','S001','Chicken Soup','2025-03-01 10:00:00',2),
('PU002','PES1UG23CS002','S001','Tomato Soup','2025-03-01 11:00:00',1),
('PU003','PES1UG23EC001','S002','Veg Sandwich','2025-03-01 12:00:00',3),
('PU004','PES1UG23ME001','S003','Chicken Roll','2025-03-02 13:00:00',2),
('PU005','PES1UG23IS001','S004','Veg Roll','2025-03-02 14:00:00',4),
('PU006','PES1UG23EE001','S005','Noodles','2025-03-03 15:00:00',1),
('PU007','PES1UG23BT001','S006','Fried Rice','2025-03-03 16:00:00',2),
('PU008','PES1UG23CV001','S007','Paneer Tikka','2025-03-04 17:00:00',3),
('PU009','PES1UG23EC002','S008','Chicken Biryani','2025-03-05 18:00:00',2),
('PU010','PES1UG23CS003','S009','Momo','2025-03-06 19:00:00',2),
('PU011','PES1UG23CS004','S010','Burger','2025-03-07 20:00:00',1),
('PU012','PES1UG23CS005','S011','Fries','2025-03-08 21:00:00',2),
('PU013','PES1UG23CS006','S012','Pasta','2025-03-09 22:00:00',1),
('PU014','PES1UG23CS007','S013','Wrap','2025-03-10 23:00:00',2),
('PU015','PES1UG23CS008','S014','Ice Cream','2025-03-11 23:30:00',3);
